<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Building Abstractions with Data - SICP</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./src/styles/docco.min.css">
        <link rel="stylesheet" href="./run_button_style.css">
        <link rel="stylesheet" href="./custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SICP</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="section" class="chapter"><a class="header" href="#section"></a></h1>
<h2 id="chapter-2"><a class="header" href="#chapter-2"><a href="book-Z-H-4.html#%_toc_%_chap_2">Chapter 2</a></a></h2>
<h1 id="building-abstractions-with-data"><a class="header" href="#building-abstractions-with-data"><a href="book-Z-H-4.html#%_toc_%_chap_2">Building Abstractions with Data</a></a></h1>
<div class="info">
We now come to the decisive step of mathematical abstraction: we
forget about what the symbols stand for. `...`\[The mathematician\]
need not be idle; there are many operations which he may carry out
with these symbols, without ever having to look at the things they
stand for.
<p>Hermann Weyl,  The Mathematical Way of Thinking</p>
</div>
<p>We concentrated in chapter 1 on
computational processes and on the role of procedures in program design.
We saw how to use primitive data (numbers) and primitive operations
(arithmetic operations), how to combine procedures to form compound
procedures through composition, conditionals, and the use of parameters,
and how to abstract procedures by using <code>define</code>. We saw that a
procedure can be regarded as a pattern for the local evolution of a
process, and we classified, reasoned about, and performed simple
algorithmic analyses of some common patterns for processes as embodied
in procedures. We also saw that higher-order procedures enhance the
power of our language by enabling us to manipulate, and thereby to
reason in terms of, general methods of computation. This is much of the
essence of programming.</p>
<p>In this chapter we are going to look at more complex data. All the
procedures in chapter 1 operate on simple numerical data, and simple
data are not sufficient for many of the problems we wish to address
using computation. Programs are typically designed to model complex
phenomena, and more often than not one must construct computational
objects that have several parts in order to model real-world phenomena
that have several aspects. Thus, whereas our focus in chapter 1 was on
building abstractions by combining procedures to form compound
procedures, we turn in this chapter to another key aspect of any
programming language: the means it provides for building abstractions by
combining data objects to form <em>compound data</em>.</p>
<p>Why do we want compound data in a programming language? For the same
reasons that we want compound procedures: to elevate the conceptual
level at which we can design our programs, to increase the modularity of
our designs, and to enhance the expressive power of our language. Just
as the ability to define procedures enables us to deal with processes at
a higher conceptual level than that of the primitive operations of the
language, the ability to construct compound data objects enables us to
deal with data at a higher conceptual level than that of the primitive
data objects of the language.</p>
<p>Consider the task of designing a system to perform
arithmetic with rational numbers. We could imagine an operation
<code>add-rat</code> that takes two rational numbers and produces their sum. In
terms of simple data, a rational number can be thought of as two
integers: a numerator and a denominator. Thus, we could design a program
in which each rational number would be represented by two integers (a
numerator and a denominator) and where <code>add-rat</code> would be implemented by
two procedures (one producing the numerator of the sum and one producing
the denominator). But this would be awkward, because we would then need
to explicitly keep track of which numerators corresponded to which
denominators. In a system intended to perform many operations on many
rational numbers, such bookkeeping details would clutter the programs
substantially, to say nothing of what they would do to our minds. It
would be much better if we could ``glue together'' a numerator and
denominator to form a pair -- a <em>compound data object</em> -- that our
programs could manipulate in a way that would be consistent with
regarding a rational number as a single conceptual unit.</p>
<p>The use of compound data also enables us to increase the modularity of
our programs. If we can manipulate rational numbers directly as objects
in their own right, then we can separate the part of our program that
deals with rational numbers per se from the details of how rational
numbers may be represented as pairs of integers. The general technique
of isolating the parts of a program that deal with how data objects are
represented from the parts of a program that deal with how data objects
are used is a powerful design methodology called <em>data
abstraction</em>. We will see how data abstraction makes programs much
easier to design, maintain, and modify.</p>
<p>The use of compound data leads to a real increase in the expressive
power of our programming language. Consider the idea of forming a
``linear combination'' <em>ax</em> + <em>by</em>. We might like to write a
procedure that would accept <em>a</em>, <em>b</em>, <em>x</em>, and <em>y</em> as arguments and
return the value of <em>ax</em> + <em>by</em>. This presents no difficulty if the
arguments are to be numbers, because we can readily define the procedure</p>
<p><code>(define (linear-combination a b x y) </code><br />
<code>  (+ (* a x) (* b y)))</code>\</p>
<p>But suppose we are not concerned only with numbers. Suppose we would
like to express, in procedural terms, the idea that one can form linear
combinations whenever addition and multiplication are defined -- for
rational numbers, complex numbers, polynomials, or whatever. We could
express this as a procedure of the form</p>
<p><code>(define (linear-combination a b x y)     </code><br />
<code>  (add (mul a x) (mul b y))) </code>\</p>
<p>where <code>add</code> and <code>mul</code> are not the primitive procedures <code>+</code> and <code>*</code> but
rather more complex things that will perform the appropriate operations
for whatever kinds of data we pass in as the arguments <code>a</code>, <code>b</code>, <code>x</code>,
and <code>y</code>. The key point is that the only thing <code>linear-combination</code>
should need to know about <code>a</code>, <code>b</code>, <code>x</code>, and <code>y</code> is that the procedures
<code>add</code> and <code>mul</code> will perform the appropriate manipulations. From the
perspective of the procedure <code>linear-combination</code>, it is irrelevant what
<code>a</code>, <code>b</code>, <code>x</code>, and <code>y</code> are and even more irrelevant how they might
happen to be represented in terms of more primitive data. This same
example shows why it is important that our programming language provide
the ability to manipulate compound objects directly: Without this, there
is no way for a procedure such as <code>linear-combination</code> to pass its
arguments along to <code>add</code> and <code>mul</code> without having to know their detailed
structure.<a href="book-Z-H-13.html#footnote_Temp_131">^[1]{.small}^</a>{#call_footnote_Temp_131}
We begin this chapter by implementing the rational-number arithmetic
system mentioned above. This will form the background for our discussion
of compound data and data abstraction. As with compound procedures, the
main issue to be addressed is that of abstraction as a technique for
coping with complexity, and we will see how data abstraction enables us
to erect suitable <em>abstraction barriers</em> between
different parts of a program.</p>
<p>We will see that the key to forming compound data is that a programming
language should provide some kind of ``glue'' so that data objects
can be combined to form more complex data objects. There are many
possible kinds of glue. Indeed, we will discover how to form compound
data using no special ``data'' operations at all, only procedures.
This will further blur the distinction between ``procedure'' and
``data,'' which was already becoming tenuous toward the end of
chapter 1. We will also explore some conventional techniques for
representing sequences and trees. One key idea in dealing with compound
data is the notion of <em>closure</em> -- that the glue we use
for combining data objects should allow us to combine not only primitive
data objects, but compound data objects as well. Another key idea is
that compound data objects can serve as <em>conventional
interfaces</em> for combining program modules in mix-and-match ways. We
illustrate some of these ideas by presenting a simple graphics language
that exploits closure.</p>
<p>We will then augment the representational power of our language by
introducing <em>symbolic expressions</em> --
data whose elementary parts can be arbitrary symbols rather than only
numbers. We explore various alternatives for representing sets of
objects. We will find that, just as a given numerical function can be
computed by many different computational processes, there are many ways
in which a given data structure can be represented in terms of simpler
objects, and the choice of representation can have significant impact on
the time and space requirements of processes that manipulate the data.
We will investigate these ideas in the context of symbolic
differentiation, the representation of sets, and the encoding of
information.</p>
<p>Next we will take up the problem of working with data that may be
represented differently by different parts of a program. This leads to
the need to implement <em>generic
operations</em>, which must handle many different types of data. Maintaining
modularity in the presence of generic operations requires more powerful
abstraction barriers than can be erected with simple data abstraction
alone. In particular, we introduce <em>data-directed programming</em> as a
technique that allows individual data representations to be designed in
isolation and then combined <em>additively</em> (i.e., without
modification). To illustrate the power of this approach to system
design, we close the chapter by applying what we have learned to the
implementation of a package for performing symbolic arithmetic on
polynomials, in which the coefficients of the polynomials can be
integers, rational numbers, complex numbers, and even other polynomials.</p>
<p>::: smallprint</p>
<hr />
<p>:::</p>
<p>::: footnote
<a href="book-Z-H-13.html#call_footnote_Temp_131">^[1]{.small}^</a>{#footnote_Temp_131}
The ability to directly manipulate procedures provides an analogous
increase in the expressive power of a programming language. For example,
in section <a href="book-Z-H-12.html#%_sec_1.3.1">1.3.1</a> we introduced the <code>sum</code>
procedure, which takes a procedure <code>term</code> as an argument and computes
the sum of the values of <code>term</code> over some specified interval. In order
to define <code>sum</code>, it is crucial that we be able to speak of a procedure
such as <code>term</code> as an entity in its own right, without regard for how
<code>term</code> might be expressed with more primitive operations. Indeed, if we
did not have the notion of ``a procedure,'' it is doubtful that we
would ever even think of the possibility of defining an operation such
as <code>sum</code>. Moreover, insofar as performing the summation is concerned,
the details of how <code>term</code> may be constructed from more primitive
operations are irrelevant.
:::</p>
<p>::: navigation
[Go to <a href="book.html">first</a>, <a href="book-Z-H-12.html">previous</a>,
<a href="book-Z-H-14.html">next</a> page;
  <a href="book-Z-H-4.html#%_toc_start">contents</a>;
  <a href="book-Z-H-38.html#%_index_start">index</a>]
:::</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="1.3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="2.1.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="1.3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="2.1.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="./highlight.js"></script>
        <script src="./src/languages/scheme.min.js"></script>
        <script src="./biwascheme.min.js"></script>
        <script src="./biwascheme_run_logic.js"></script>


    </div>
    </body>
</html>
